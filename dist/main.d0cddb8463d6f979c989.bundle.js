webpackJsonp([17],{0:function(t,o,e){t.exports=e("cDNt")},"20fz":function(t,o,e){"use strict";e.d(o,"a",function(){return n});var n=function(){function t(){}return t}()},"2kPj":function(t,o,e){"use strict";e.d(o,"a",function(){return i});var n=e("BkNc"),i=function(){function t(t){this.router=t}return t.prototype.canActivate=function(){return!!localStorage.getItem("isLoggedin")||(this.router.navigate(["/login"]),!1)},t.ctorParameters=function(){return[{type:n.l}]},t}()},"9ilZ":function(t,o,e){"use strict";var n=e("eoFs"),i=function(){function t(t,o,e){this.codArt=t,this.nombre=o,this.precio=e,this.cantidadPedido=0}return t}(),r=function(){function t(t,o,e,n){this.productos={},this.preciosArticuloParticular={},this.descuentosFamilia={},this.preciosPorTipoCLiente={},this.inicizalizarCarrito(t,o,e,n)}return t.prototype.inicizalizarCarrito=function(t,o,e,n){var r=this;this.inicializarEstructurasDePrecios(o,e),t.forEach(function(t,o){r.productos[t.codart]=new i(t.codart,t.articulo,r.definirPrecio(t.codart,t["preven"+n]))})},t.prototype.inicializarEstructurasDePrecios=function(t,o){var e=this;t.filter(function(t,o){return""==t.codfam}).forEach(function(t,o){e.preciosArticuloParticular[t.codart]=t.preven}),t.filter(function(t,o){return""!=t.codfam}).forEach(function(t,o){e.descuentosFamilia[t.codart]=t.descuento}),o.forEach(function(t,o){e.preciosPorTipoCLiente[t.codArt]=t.preven})},t.prototype.definirPrecio=function(t,o){return this.preciosArticuloParticular[t]?this.preciosArticuloParticular[t]:this.preciosPorTipoCLiente[t]?this.preciosPorTipoCLiente[t]:this.descuentosFamilia[t]?o-o*(100*this.descuentosFamilia[t]):o},t}(),a=function(){function t(t,o,e,n,i,a,s,c,l,d,u){this.metodoFacturacion=t,this.id=o,this.codigo=e,this.nombre=n,this.collapsed=i,this.empezadoPedido=a,this.cobrosPendientes=s,this.historialAlbaranes=c,this.carrito=new r(l,d,u,t),this.fecha_pedido=new Date,this.tieneCobrosPendientes=s.length>0}return t.prototype.generarPedido_JSON=function(t){var o=this.objetToArray(this.carrito.productos,t);return{codcli:this.codigo,can:"B",pedido:o}},t.prototype.objetToArray=function(t,o){var e=[];for(var n in t)t[n].cantidadPedido>0&&e.push(this.formatoProductoBD(t[n],o));return e},t.prototype.formatoProductoBD=function(t,o){return{codart:t.codArt,desmod:t.nombre,canpre:t.cantidadPedido,preven:t.precio,codalm:o}},t}(),s=function(){function t(t){this.arrayTarifasNumeroALetra=["a","b","c","d","e","f"],this.nombre=t,this.fecha_pedido=new Date,this.pedidos=[]}return t.prototype.imprimirPedidos=function(){console.log(this.pedidos)},t.prototype.insertarCliente=function(t,o,e,n,i,r,s,c,l,d,u){this.pedidos.push(new a(this.arrayTarifasNumeroALetra[t-1],o,e,n,i,r,s,c,l,d,u))},t.prototype.generarPedidos_JSON=function(){console.log("PROVINCIA",this.provincia);var t=[],o=this;this.pedidos.forEach(function(e,n){t.push(e.generarPedido_JSON(o.provincia))});var e={obsint:this.mail,pedidos:t};return console.log(e),e},t}(),c=e("yV+O"),l=e("BkNc");e.d(o,"a",function(){return d});var d=function(){function t(t,o){this.httpCalls=t,this.router=o,this.messageSource=new n.a("Otros"),this.familia_actual={codfam:null,familia:null},this.alerts=[],this.errores=[],this.LIM=10,this.mensajes=[],this.reNumbers=/^\d+$/,this.clienteSeleccionado={codcli:null,clientes:null,tarCli:null,tipoCliente:null},this.errores=[{id:1,type:"success",message:"Pulsa el bot\xf3n superior para empezar a a\xf1adir clientes."},{id:2,type:"danger",message:"No se permiten m\xe1s de "+this.LIM+" clientes."}],this.comercial=new s("Com_ex_1")}return t.prototype.cambiarDatosComercial=function(t,o,e){this.comercial.nombre=t,this.comercial.provincia=o,this.comercial.mail=e},t.prototype.mostrarError=function(t){this.alerts.length<=0&&this.alerts.push(this.errores[t])},t.prototype.closeAlert=function(t){var o=this.alerts.indexOf(t);this.alerts.splice(o,1)},t.prototype.cerrar=function(t){this.comercial.pedidos.forEach(function(o,e){e!=t&&(o.collapsed=!0)})},t.prototype.addClient=function(t){if(!t){var o=this;if(this.alerts[0]&&1===this.alerts[0].id&&this.closeAlert(this.alerts[0]),o.comercial.pedidos.length<o.LIM){var e=this.comercial.pedidos.length;this.httpCalls.getHistorialAlbaranes(o.clienteSeleccionado.codcli,o.clienteSeleccionado.clientes,function(){o.httpCalls.getCobrosPendientes(o.clienteSeleccionado.codcli,o.clienteSeleccionado.clientes,function(){o.httpCalls.getDescuentosPorClienteProducto(o.clienteSeleccionado.codcli,o.clienteSeleccionado.clientes,function(t){o.httpCalls.getPreciosPortipoCLiente(o.clienteSeleccionado.tipoCliente,o.clienteSeleccionado.clientes,function(n){o.comercial.insertarCliente(o.clienteSeleccionado.tarCli,e,o.clienteSeleccionado.codcli,o.clienteSeleccionado.clientes,!0,!1,o.httpCalls.objetosJSON.cobrosPendientes,o.httpCalls.objetosJSON.albaranes,o.httpCalls.objetosJSON.productos,t,n)})})})})}else o.mostrarError(1)}},t.prototype.cambiarFamilia=function(t){this.messageSource.next(t)},t.prototype.nombreFormateado=function(t){return t[0]+t.toLowerCase().slice(1)},t.prototype.asignarClienteActual=function(t){this.clienteActualPedido=t},t.prototype.closeTagsCLients=function(t){this.comercial.pedidos.forEach(function(o,e){o.codigo===t?o.collapsed=!o.collapsed:o.collapsed=!0})},t.prototype.truncate=function(t){return Number(t).toFixed(2)},t.prototype.filtrar=function(){var t=new RegExp(".*"+this.filtrado+".*","ig");this.arrayProductosFiltrados=this.arrayProductosFamilia.filter(function(o,e){return t.test(o.articulo)||t.test(o.codart)})},t.prototype.confirmarPedido=function(t){"ok"===t.status&&(this.router.navigate(["/"]),window.location.reload())},t.ctorParameters=function(){return[{type:c.a},{type:l.l}]},t}()},Pl8m:function(t,o,e){"use strict";e.d(o,"a",function(){return r});var n=e("CPp0"),i=e("AP4T"),r=(e("GQSG"),e("HT7u"),e("HECM"),e("PSNg"),e("Wy0q"),e("ABGK"),e("ivSB"),e("Wi6i"),e("RSzd"),function(){function t(t){this.http=t,this.servidor="http://duwisonguitian.ddns.net",this.LoginUrl=this.servidor+"/symfony/web/app_dev.php/login"}return t.prototype.signup=function(t){var o=JSON.stringify(t),e="login="+o;console.log(e);var i=new n.d({"Content-Type":"application/x-www-form-urlencoded"});return this.http.post(this.LoginUrl,e,{headers:i}).map(this.extractData).catch(this.handleError)},t.prototype.getIdentity=function(){var t=JSON.parse(localStorage.getItem("identity"));return this.identity="undefined"!=t?t:null,this.identity},t.prototype.getToken=function(){var t=localStorage.getItem("token");return this.token="undefined"!=t?t:null,this.token},t.prototype.extractData=function(t){return t.json()||{}},t.prototype.handleError=function(t){var o=t.message?t.message:t.status?t.status+" - "+t.statusText:"Server handle error";return console.error(o),i.a.throw(o)},t.ctorParameters=function(){return[{type:n.e}]},t}())},aoCP:function(t,o,e){"use strict";e.d(o,"a",function(){return i});var n=e("9ilZ"),i=function(){function t(t){this.dataService=t,this.isActive=!1,this.showMenu="",console.log("DATASREVICE SIDE",this.dataService)}return t.prototype.eventCalled=function(){this.isActive=!this.isActive},t.prototype.addExpandClass=function(t){t===this.showMenu?this.showMenu="0":this.showMenu=t},t.prototype.onLoggedout=function(){localStorage.removeItem("isLoggedin")},t.ctorParameters=function(){return[{type:n.a}]},t}()},cDNt:function(t,o,e){"use strict";function n(t){return new c.a(t,"/assets/i18n/",".json")}function i(t){return a["\u0275vid"](0,[(t()(),a["\u0275eld"](0,0,null,null,5,"block-ui",[],null,null,null,p.c,p.b)),a["\u0275did"](1,114688,null,0,m.BlockUIComponent,[],null,null),(t()(),a["\u0275ted"](-1,0,[" \n"])),(t()(),a["\u0275eld"](3,16777216,null,0,1,"router-outlet",[],null,null,null,null,null)),a["\u0275did"](4,212992,null,0,g.p,[g.b,a.ViewContainerRef,a.ComponentFactoryResolver,[8,null],a.ChangeDetectorRef],null,null),(t()(),a["\u0275ted"](-1,0,["\n"])),(t()(),a["\u0275ted"](-1,null,[" \n"]))],function(t,o){t(o,1,0),t(o,4,0)},null)}function r(t){return a["\u0275vid"](0,[(t()(),a["\u0275eld"](0,0,null,null,1,"app-root",[],null,null,null,i,C)),a["\u0275did"](1,49152,null,0,u,[b.a],null,null)],null,null)}Object.defineProperty(o,"__esModule",{value:!0});var a=e("/oeL"),s={production:!0},c=e("kkjc"),l=function(){function t(){}return t}(),d=e("9Qcf"),u=function(){function t(t){this.translate=t,t.addLangs(["en","fr","ur","es","it","fa"]),t.setDefaultLang("en");var o=t.getBrowserLang();t.use(o.match(/en|fr|ur|es|it|fa/)?o:"en")}return t.ctorParameters=function(){return[{type:d.b}]},t}(),p=e("vz+7"),f=e("E+IL"),h=[""],m=e("jWVr"),g=e("BkNc"),b=e("WDs4"),y=[h],C=a["\u0275crt"]({encapsulation:0,styles:y,data:{}}),P=a["\u0275ccf"]("app-root",u,r,{},{},[]),v=e("qbdv"),S=e("fc+i"),A=e("f9zQ"),E=e("fL27"),I=e("EyWH"),T=e("bm2B"),L=e("CPp0"),N=e("XKz0"),O=e("lwfz"),R=e("arFH"),j=e("b6Rz"),k=e("a3e3"),F=e("t0d0"),w=e("R08E"),U=e("Qg/J"),_=e("maBJ"),D=e("2kPj"),M=e("yV+O"),H=e("9ilZ"),J=e("Pl8m"),z=e("gOac"),B=(z.a,function(){function t(){}return t}()),V=e("ZU0+"),x=a["\u0275cmf"](l,[u],function(t){return a["\u0275mod"]([a["\u0275mpd"](512,a.ComponentFactoryResolver,a["\u0275CodegenComponentFactoryResolver"],[[8,[p.a,f.a,P]],[3,a.ComponentFactoryResolver],a.NgModuleRef]),a["\u0275mpd"](5120,a.LOCALE_ID,a["\u0275m"],[[3,a.LOCALE_ID]]),a["\u0275mpd"](4608,v.NgLocalization,v.NgLocaleLocalization,[a.LOCALE_ID]),a["\u0275mpd"](5120,a.APP_ID,a["\u0275f"],[]),a["\u0275mpd"](5120,a.IterableDiffers,a["\u0275k"],[]),a["\u0275mpd"](5120,a.KeyValueDiffers,a["\u0275l"],[]),a["\u0275mpd"](4608,S.c,S.t,[v.DOCUMENT]),a["\u0275mpd"](6144,a.Sanitizer,null,[S.c]),a["\u0275mpd"](4608,S.f,S.g,[]),a["\u0275mpd"](5120,S.d,function(t,o,e,n){return[new S.l(t),new S.p(o),new S.o(e,n)]},[v.DOCUMENT,v.DOCUMENT,v.DOCUMENT,S.f]),a["\u0275mpd"](4608,S.e,S.e,[S.d,a.NgZone]),a["\u0275mpd"](135680,S.n,S.n,[v.DOCUMENT]),a["\u0275mpd"](4608,S.m,S.m,[S.e,S.n]),a["\u0275mpd"](5120,A.a,E.d,[]),a["\u0275mpd"](5120,A.c,E.e,[]),a["\u0275mpd"](4608,A.b,E.c,[A.a,A.c]),a["\u0275mpd"](5120,a.RendererFactory2,E.f,[S.m,A.b,a.NgZone]),a["\u0275mpd"](6144,S.q,null,[S.n]),a["\u0275mpd"](4608,a.Testability,a.Testability,[a.NgZone]),a["\u0275mpd"](4608,S.h,S.h,[v.DOCUMENT]),a["\u0275mpd"](4608,S.j,S.j,[v.DOCUMENT]),a["\u0275mpd"](4608,I.b,E.b,[a.RendererFactory2,S.b]),a["\u0275mpd"](4608,T.t,T.t,[]),a["\u0275mpd"](4608,L.c,L.c,[]),a["\u0275mpd"](4608,L.h,L.b,[]),a["\u0275mpd"](5120,L.j,L.k,[]),a["\u0275mpd"](4608,L.i,L.i,[L.c,L.h,L.j]),a["\u0275mpd"](4608,L.g,L.a,[]),a["\u0275mpd"](5120,L.e,L.l,[L.i,L.g]),a["\u0275mpd"](5120,g.a,g.y,[g.l]),a["\u0275mpd"](4608,g.e,g.e,[]),a["\u0275mpd"](6144,g.g,null,[g.e]),a["\u0275mpd"](135680,g.q,g.q,[g.l,a.NgModuleFactoryLoader,a.Compiler,a.Injector,g.g]),a["\u0275mpd"](4608,g.f,g.f,[]),a["\u0275mpd"](5120,g.i,g.B,[g.z]),a["\u0275mpd"](5120,a.APP_BOOTSTRAP_LISTENER,function(t){return[t]},[g.i]),a["\u0275mpd"](4608,N.h,N.m,[v.DOCUMENT,a.PLATFORM_ID,N.k]),a["\u0275mpd"](4608,N.n,N.n,[N.h,N.l]),a["\u0275mpd"](5120,N.a,function(t){return[t]},[N.n]),a["\u0275mpd"](4608,N.j,N.j,[]),a["\u0275mpd"](6144,N.i,null,[N.j]),a["\u0275mpd"](4608,N.g,N.g,[N.i]),a["\u0275mpd"](6144,N.b,null,[N.g]),a["\u0275mpd"](5120,N.f,N.o,[N.b,[2,N.a]]),a["\u0275mpd"](4608,N.c,N.c,[N.f]),a["\u0275mpd"](5120,O.BlockUIInstanceService,R.provideInstance,[]),a["\u0275mpd"](4608,j.BlockUIService,j.BlockUIService,[O.BlockUIInstanceService]),a["\u0275mpd"](5120,k.b,n,[L.e]),a["\u0275mpd"](4608,F.a,F.b,[]),a["\u0275mpd"](4608,w.b,w.a,[]),a["\u0275mpd"](4608,U.b,U.a,[]),a["\u0275mpd"](4608,_.a,_.a,[]),a["\u0275mpd"](4608,b.a,b.a,[_.a,k.b,F.a,w.b,U.b,b.b,b.c]),a["\u0275mpd"](4608,D.a,D.a,[g.l]),a["\u0275mpd"](4608,M.a,M.a,[N.c,L.e]),a["\u0275mpd"](4608,H.a,H.a,[M.a,g.l]),a["\u0275mpd"](4608,J.a,J.a,[L.e]),a["\u0275mpd"](512,v.CommonModule,v.CommonModule,[]),a["\u0275mpd"](1024,a.ErrorHandler,S.r,[]),a["\u0275mpd"](1024,a.NgProbeToken,function(){return[g.u()]},[]),a["\u0275mpd"](512,g.z,g.z,[a.Injector]),a["\u0275mpd"](1024,a.APP_INITIALIZER,function(t,o,e){return[S.s(t,o),g.A(e)]},[[2,S.i],[2,a.NgProbeToken],g.z]),a["\u0275mpd"](512,a.ApplicationInitStatus,a.ApplicationInitStatus,[[2,a.APP_INITIALIZER]]),a["\u0275mpd"](131584,a["\u0275e"],a["\u0275e"],[a.NgZone,a["\u0275Console"],a.Injector,a.ErrorHandler,a.ComponentFactoryResolver,a.ApplicationInitStatus]),a["\u0275mpd"](2048,a.ApplicationRef,null,[a["\u0275e"]]),a["\u0275mpd"](512,a.ApplicationModule,a.ApplicationModule,[a.ApplicationRef]),a["\u0275mpd"](512,S.a,S.a,[[3,S.a]]),a["\u0275mpd"](512,E.a,E.a,[]),a["\u0275mpd"](512,T.q,T.q,[]),a["\u0275mpd"](512,T.e,T.e,[]),a["\u0275mpd"](512,L.f,L.f,[]),a["\u0275mpd"](1024,g.t,g.w,[[3,g.l]]),a["\u0275mpd"](512,g.s,g.c,[]),a["\u0275mpd"](512,g.b,g.b,[]),a["\u0275mpd"](256,g.h,{},[]),a["\u0275mpd"](1024,v.LocationStrategy,g.v,[v.PlatformLocation,[2,v.APP_BASE_HREF],g.h]),a["\u0275mpd"](512,v.Location,v.Location,[v.LocationStrategy]),a["\u0275mpd"](512,a.Compiler,a.Compiler,[]),a["\u0275mpd"](512,a.NgModuleFactoryLoader,a.SystemJsNgModuleLoader,[a.Compiler,[2,a.SystemJsNgModuleLoaderConfig]]),a["\u0275mpd"](1024,g.j,function(){return[[{path:"",loadChildren:"./layout/layout.module#LayoutModule",canActivate:[D.a]},{path:"login",loadChildren:"./login/login.module#LoginModule"},{path:"not-found",loadChildren:"./not-found/not-found.module#NotFoundModule"},{path:"**",redirectTo:"not-found"}]]},[]),a["\u0275mpd"](1024,g.l,g.x,[a.ApplicationRef,g.s,g.b,v.Location,a.Injector,a.NgModuleFactoryLoader,a.Compiler,g.j,g.h,[2,g.r],[2,g.k]]),a["\u0275mpd"](512,g.o,g.o,[[2,g.t],[2,g.l]]),a["\u0275mpd"](512,B,B,[]),a["\u0275mpd"](512,N.e,N.e,[]),a["\u0275mpd"](512,N.d,N.d,[]),a["\u0275mpd"](512,V.a,V.a,[]),a["\u0275mpd"](512,R.BlockUIModule,R.BlockUIModule,[]),a["\u0275mpd"](512,d.a,d.a,[]),a["\u0275mpd"](512,l,l,[]),a["\u0275mpd"](256,N.k,"XSRF-TOKEN",[]),a["\u0275mpd"](256,N.l,"X-XSRF-TOKEN",[]),a["\u0275mpd"](256,b.c,void 0,[]),a["\u0275mpd"](256,b.b,void 0,[])])});s.production&&Object(a.enableProdMode)(),Object(S.k)().bootstrapModuleFactory(x)},gFIY:function(t,o,e){function n(t){var o=i[t];return o?Promise.all(o.slice(1).map(e.e)).then(function(){return e(o[0])}):Promise.reject(new Error("Cannot find module '"+t+"'."))}var i={"./blank-page/blank-page.module.ngfactory":["HQfz",15],"./bs-component/bs-component.module.ngfactory":["ZpkU",0,14],"./bs-element/bs-element.module.ngfactory":["/JGO",0,13],"./charts/charts.module.ngfactory":["GYnh",0,12],"./dashboard/dashboard.module.ngfactory":["wfpq",0,11],"./family-products/familiy-products.module.ngfactory":["XFrT",0,10],"./form/form.module.ngfactory":["QgKB",0,9],"./grid/grid.module.ngfactory":["LuXh",0,8],"./layout/layout.module.ngfactory":["7fD3",0,7],"./login/login.module.ngfactory":["njmd",2],"./not-found/not-found.module.ngfactory":["Vg0N",1],"./products-cards/products-cards.module.ngfactory":["jbFJ",0,6],"./products/products.module.ngfactory":["ZdYS",0,5],"./purchase-cart/purchase-cart.module.ngfactory":["7R2G",0,4],"./tables/tables.module.ngfactory":["ypbM",0,3]};n.keys=function(){return Object.keys(i)},n.id="gFIY",t.exports=n},gOac:function(t,o,e){"use strict";var n=function(){function t(){}return t}(),i=e("o+mL"),r=e("aoCP"),a=e("20fz"),s=e("tCmA"),c=e("2kPj"),l=e("9ilZ"),d=e("yV+O");e.d(o,!1,function(){return n}),e.d(o,!1,function(){return i.a}),e.d(o,!1,function(){return r.a}),e.d(o,!1,function(){return a.a}),e.d(o,!1,function(){return s.a}),e.d(o,"a",function(){return c.a}),e.d(o,"b",function(){return l.a}),e.d(o,"c",function(){return d.a})},"o+mL":function(t,o,e){"use strict";e.d(o,"a",function(){return r});var n=e("BkNc"),i=e("9Qcf"),r=function(){function t(t,o){var e=this;this.translate=t,this.router=o,this.pushRightClass="push-right",this.router.events.subscribe(function(t){t instanceof n.d&&window.innerWidth<=992&&e.isToggled()&&e.toggleSidebar()})}return t.prototype.ngOnInit=function(){this.nombreUsuario=localStorage.getItem("nombre"),console.log(localStorage.getItem("nombre"))},t.prototype.isToggled=function(){return document.querySelector("body").classList.contains(this.pushRightClass)},t.prototype.toggleSidebar=function(){document.querySelector("body").classList.toggle(this.pushRightClass)},t.prototype.rltAndLtr=function(){document.querySelector("body").classList.toggle("rtl")},t.prototype.onLoggedout=function(){localStorage.removeItem("isLoggedin")},t.prototype.changeLang=function(t){this.translate.use(t)},t.ctorParameters=function(){return[{type:i.b},{type:n.l}]},t}()},tCmA:function(t,o,e){"use strict";e.d(o,"a",function(){return n});var n=function(){function t(){}return t}()},"yV+O":function(t,o,e){"use strict";e.d(o,"a",function(){return d});var n=e("XKz0"),i=e("CPp0"),r=e("eoFs"),a=e("/zTA"),s=(e.n(a),e("U6yM")),c=this&&this.__decorate||function(t,o,e,n){var i,r=arguments.length,a=r<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,o,e,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(o,e,a):i(o,e))||a);return r>3&&a&&Object.defineProperty(o,e,a),a},l=this&&this.__metadata||function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},d=function(){function t(t,o){this.http=t,this.http2=o,this.hashCargando={familias:!1,clientes:!1,productos:!1,tarifaArtciuloFamilia:!1,tarifaTipoCliente:!1,guardar:!1,albaranes:!1,cobrosPendientes:!1},this.objetosJSON={clientes:null,familias:null,productos:null,tarifaArtciuloFamilia:null,tarifaTipoCliente:null,familiasLocal:null,alabaranes:null,cobrosPendientes:null},this.data$=new r.a({}),this.getObjects(),this.EstaCargando()}return t.prototype.EstaCargando=function(){var t=!1;for(var o in this.hashCargando)t=t||this.hashCargando[o];return t},t.prototype.getFamilias=function(){var o=this;this.blockUI.start("Cargando familias de productos."),this.hashCargando.familias=!0,this.http.get(t.SREVER_PATH+t.PATHS.familias).subscribe(function(t){return o.objetosJSON.familias=t,o.hashCargando.familias=!1,o.EstaCargando()||o.blockUI.stop(),o.getFamiliasLocal(),t})},t.prototype.getCobrosPendientes=function(o,e,n){var i=this;this.blockUI.start("Cargando cobros pendientes de "+e+"."),this.hashCargando.cobrosPendientes=!0,this.http.get(t.SREVER_PATH+t.PATHS.cobrosPendientes+"?codcli="+o).subscribe(function(t){return i.objetosJSON.cobrosPendientes=t,i.hashCargando.cobrosPendientes=!1,i.EstaCargando()||i.blockUI.stop(),n(),t})},t.prototype.getHistorialAlbaranes=function(o,e,n){var i=this;this.blockUI.start("Cargando historial de albaranes de "+e+"."),this.hashCargando.albaranes=!0,this.http.get(t.SREVER_PATH+t.PATHS.albaranes+"?codcli="+o).subscribe(function(t){return i.objetosJSON.albaranes=t,i.hashCargando.albaranes=!1,i.EstaCargando()||i.blockUI.stop(),n(),t})},t.prototype.getFamiliasLocal=function(){var o=this;this.blockUI.start("Cargando familias de productos con im\xe1genes locales."),this.hashCargando.familiasLocal=!0,this.http.get(t.SREVER_PATH_LOCAL+t.PATHS.familias+t.EXT).subscribe(function(t){return o.objetosJSON.familiasLocal=t,o.hashCargando.familiasLocal=!1,o.EstaCargando()||o.blockUI.stop(),o.construirFamilias(),t})},t.prototype.construirFamilias=function(){var t=[],o=this;this.objetosJSON.familias.forEach(function(e,n){var i=e.codfam,r=o.objetosJSON.familiasLocal.filter(function(t){return t.codfam===i});if(r.length>0)t.push(r[0]);else{var a=e;a.img="assets/png/001-cutlery.png",t.push(a)}}),this.objetosJSON.familias=t},t.prototype.getDescuentosPorClienteProducto=function(o,e,n){var i=this;this.blockUI.start("Cargando descuentos para "+e+"."),this.hashCargando.tarifaArtciuloFamilia=!0,this.http.get(t.SREVER_PATH+t.PATHS.tarifaArtciuloFamilia+"?codcli="+o).subscribe(function(t){i.objetosJSON.tarifaArtciuloFamilia=t,i.hashCargando.tarifaArtciuloFamilia=!1,i.EstaCargando()||i.blockUI.stop(),n(i.objetosJSON.tarifaArtciuloFamilia)})},t.prototype.getPreciosPortipoCLiente=function(o,e,n){var i=this;this.blockUI.start("Cargando precios para "+e+"."),this.hashCargando.tarifaTipoCliente=!0,this.http.get(t.SREVER_PATH+t.PATHS.tarifaTipoCliente+"?tipcli="+o).subscribe(function(t){i.objetosJSON.tarifaTipoCliente=t,i.hashCargando.tarifaTipoCliente=!1,i.EstaCargando()||i.blockUI.stop(),n(i.objetosJSON.tarifaTipoCliente)})},t.prototype.getProductos=function(o){var e=this;this.blockUI.start("Cargando productos de la base de datos."),this.hashCargando.productos=!0,this.http.get(t.SREVER_PATH+t.PATHS.productos+"?codprov="+o).subscribe(function(t){e.objetosJSON.productos=t,e.hashCargando.productos=!1,e.EstaCargando()||e.blockUI.stop()})},t.prototype.getObjects=function(){var o=this;this.getFamilias();var e=localStorage.provincia||"00002";this.blockUI.start("Cargando clientes de la base de datos."),this.hashCargando.clientes=!0,this.http.get(t.SREVER_PATH+t.PATHS.clientes).subscribe(function(t){o.objetosJSON.clientes=t,o.hashCargando.clientes=!1,o.EstaCargando()||o.blockUI.stop()}),this.getProductos(e)},t.prototype.enviarPedidoServidor=function(o){var e=JSON.stringify(o);new i.d({"Content-Type":"application/json"});return this.http2.post(t.SREVER_PATH+t.PATHS.guardar,e,this.options).map(this.extractData).catch(this.handleError)},t.prototype.extractData=function(t){return t.json()||{}},t.prototype.handleError=function(t){var o=t.message?t.message:t.status?t.status+" - "+t.statusText:"Server handle error";return s.a.throw(o)},t.ctorParameters=function(){return[{type:n.c},{type:i.e}]},t.IP="http://duwisonguitian.ddns.net",t.SREVER_PATH=t.IP+"/symfony/web/app_dev.php",t.SREVER_PATH_LOCAL="assets/JSON",t.EXT=".json",t.PATHS={familias:"/familias",clientes:"/clientes",productos:"/conexion",tarifaArtciuloFamilia:"/tarArtFam",tarifaTipoCliente:"/tarclitip",guardar:"/guardar/pedido",albaranes:"/hisPre",cobrosPendientes:"/carCli"},c([Object(a.BlockUI)(),l("design:type","function"==typeof(o=void 0!==a.NgBlockUI&&a.NgBlockUI)&&o||Object)],t.prototype,"blockUI",void 0),t;var o}()}},[0]);